<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TravelBloom</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <nav class="navbar">
      <div class="logo">TravelBloom</div>
      <div class="nav-links">
        <a href="#" class="active">Home</a>
        <a href="#about">About Us</a>
        <a href="#contact">Contact Us</a>
      </div>
      <div class="search-container">
        <div class="search-bar">
          <input
            type="text"
            id="searchInput"
            placeholder="Enter a destination or keyword"
          />
          <button class="search-btn">Search</button>
          <button class="clear-btn" id="clearBtn">Clear</button>
        </div>
        <div class="search-results" id="searchResults"></div>
      </div>
    </nav>

    <main class="hero">
      <div class="hero-content">
        <h1>
          <span>EXPLORE</span>
          <span>DREAM</span>
          <span>DESTINATION</span>
        </h1>
        <p>
          It encourages exploration of unfamiliar territories, embracing diverse
          cultures and landscapes, while pursuing the desired destination that
          captivates the heart and ignites a sense of wonder.
        </p>
        <button class="cta-button">BOOK NOW</button>
      </div>

      <div class="social-links">
        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
        <a href="#" class="social-link"><i class="fab fa-facebook"></i></a>
        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
        <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
      </div>
    </main>

    <section id="about">
      <h1>ABOUT US</h1>

      <p class="about-content">
        Welcome to Our Company. We are a team of passionate individuals
        dedicated to providing excellent services/products to our customers. Our
        mission is to <b>provide the best experience</b> for people travelling
        to different destinations around the world.
        <br />
        Our value include integrity, innovation, customer satisfaction and
        teamwork. We believe in <b>putting our customer first</b> and
        <b>working together</b> to achieve our goals.
        <br />
        Feel free to explore our website to learn more about what we offer!
      </p>

      <div class="team">
        <h1>OUR<br />TEAM</h1>
        <div class="card-list">
          <div class="card">
            <h3>John Doe</h3>
            <p>John is reponsible for.....</p>
            <button class="team-btn">CEO</button>
          </div>
          <div class="card">
            <h3>Celina Thomas</h3>
            <p>Celina Thomas is reponsible for.....</p>
            <button class="team-btn">Team Leader</button>
          </div>
          <div class="card">
            <h3>Mike Tyson</h3>
            <p>Mike Tyson is reponsible for.....</p>
            <button class="team-btn">Delivery Head</button>
          </div>
        </div>
      </div>
    </section>

    <section id="history">
      <div class="history-content">
        <h1>Company History</h1>
        <p>
          Founded in 2018 by avid travelers, our journey began with a vision to
          simplify travel planning by offering personalised recommendation
          tailored to individual preferences. Starting as a passion project, our
          commitment to curating unique travel experiences led to the official
          launch of our platform, driven by a team enthusiastic about exploring
          the world. Over the years, we have evolved into a trusted hub,
          leveraging cutting edge technology and expert insights to provide
          tailored destination suggestions that resonate with diverse travelers.
        </p>

        <h2>Our Location</h2>

        <div class="images">
          <img
            src="https://images.unsplash.com/photo-1496442226666-8d4d0e62e6e9?q=80&w=3540&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            alt=""
            class="location-img"
          />
          <img
            src="https://images.unsplash.com/photo-1589178941221-136be7711c99?q=80&w=3540&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            alt=""
            class="location-img"
          />
        </div>
      </div>
    </section>

    <section id="contact">
      <div>
        <h1>CONTACT US</h1>
        <p>Get in touch</p>
      </div>

      <form action="">
        <label for="name">Name</label>
        <input
          type="text"
          name="name"
          id="name"
          placeholder="Enter Your Name"
          required
        />
        <label for="email">Email</label>
        <input
          type="email"
          name="email"
          id="email"
          placeholder="Enter Your Email"
          required
        />
        <label for="message">Message</label>
        <textarea
          name="message"
          id="message"
          placeholder="Enter Your Message"
          rows="10"
          required
        ></textarea>
        <button type="submit" class="submit-form">Submit</button>
      </form>
    </section>
    <script>
      async function fetchDestinations() {
        try {
          const response = await fetch("/travel_recommendation_api.json");
          const data = await response.json();
          return data;
        } catch (error) {
          console.error("Error fetching destinations:", error);
          return null;
        }
      }

      function getAllDestinations(data) {
        const destinations = [];

        // Add countries and cities
        data.countries.forEach((country) => {
          destinations.push({
            name: country.name,
            description: `Country with cities like ${country.cities
              .map((city) => city.name.split(",")[0])
              .join(", ")}`,
            imageUrl: country.imgUrl,
          });

          country.cities.forEach((city) => {
            destinations.push({
              name: city.name,
              description: city.description,
              imageUrl: city.imageUrl,
            });
          });
        });

        // Add temples
        data.temples.forEach((temple) => {
          destinations.push({
            name: temple.name,
            description: temple.description,
            imageUrl: temple.imageUrl,
          });
        });

        // Add beaches
        data.beaches.forEach((beach) => {
          destinations.push({
            name: beach.name,
            description: beach.description,
            imageUrl: beach.imageUrl,
          });
        });

        return destinations;
      }

      function searchDestinations(query, destinations) {
        if (!query) return [];

        query = query.toLowerCase();
        return destinations.filter((destination) => {
          const name = destination.name.toLowerCase();
          const description = destination.description.toLowerCase();

          return name.includes(query) || description.includes(query);
        });
      }

      function createResultItem(destination) {
        return `
        <div class="result-item">
          <img src="${destination.imageUrl}" alt="${destination.name}" class="result-image">
          <div class="result-content">
            <div class="result-title">${destination.name}</div>
            <div class="result-description">${destination.description}</div>
            <button class="result-visit">Visit</button>
          </div>
        </div>
      `;
      }

      async function initializeSearch() {
        const searchInput = document.getElementById("searchInput");
        const searchResults = document.getElementById("searchResults");
        const clearBtn = document.getElementById("clearBtn");

        const data = await fetchDestinations();
        if (!data) return;

        const destinations = getAllDestinations(data);

        searchInput.addEventListener("input", (e) => {
          const query = e.target.value.trim();
          const results = searchDestinations(query, destinations);

          if (query && results.length > 0) {
            searchResults.innerHTML = results.map(createResultItem).join("");
            searchResults.classList.add("active");
          } else {
            searchResults.innerHTML = "";
            searchResults.classList.remove("active");
          }
        });

        clearBtn.addEventListener("click", () => {
          searchInput.value = "";
          searchResults.innerHTML = "";
          searchResults.classList.remove("active");
        });

        // Close search results when clicking outside
        document.addEventListener("click", (e) => {
          if (
            !searchResults.contains(e.target) &&
            !searchInput.contains(e.target)
          ) {
            searchResults.classList.remove("active");
          }
        });
      }

      initializeSearch();

      const submitBtn = document.querySelector(".submit-form");

      submitBtn.addEventListener("click", (e) => {
        e.preventDefault();

        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;
        const message = document.getElementById("message").value;

        document.getElementById("name").value = "";
        document.getElementById("email").value = "";
        document.getElementById("message").value = "";

        alert(
          `Your query has been successfully submitted!!!! \nName: ${name}, \nEmail: ${email}, \nMessage: ${message}`
        );
      });
    </script>
  </body>
</html>
